import{d as p,m,o as d,c as $,w as t,n as h,p as T,e,q as _,s as V,h as K,t as f,l as Z,u as F,v as b,x as U,y as z,z as C,A as w,B as Q,F as A,C as P,D as I,E as j,G as k,H as N,I as H,J as L,K as M}from"./index.85da2732.js";const B=p({setup(g){const a=m(null);return(u,s)=>(d(),$(T,{class:"q-mx-lg q-gutter-sm"},{default:t(()=>[h(u.$slots,"inputTextOrEmail",{},()=>[e(V,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=o=>a.value=o),placeholder:""},{prepend:t(()=>[e(_)]),_:1},8,["modelValue"])]),h(u.$slots,"inputPassword",{},()=>[e(V,{modelValue:a.value,"onUpdate:modelValue":s[1]||(s[1]=o=>a.value=o),placeholder:""},{prepend:t(()=>[e(_)]),_:1},8,["modelValue"])]),h(u.$slots,"formButton",{},()=>[e(K,{type:"button",color:"secondary"})])]),_:3}))}}),O={class:"q-pt-xs text-center"},S=p({props:{title:null},setup(g){return(a,u)=>(d(),f("div",O,[e(K,{type:"button",color:"secondary"},{default:t(()=>[Z(F(g.title),1)]),_:1})]))}}),D=["v-model"],G=["v-model"],J=p({setup(g){const a=b();p({name:"LogInForm"});const u=U(),s=m(a.inputError),o=m(""),c=m("");let i={email:"",password:""};const x=E=>/^(?=[a-zA-Z0-9@._%+-]{6,254}$)[a-zA-Z0-9._%+-]{1,64}@(?:[a-zA-Z0-9-]{1,63}\.){1,8}[a-zA-Z]{2,63}$/.test(E)||"Email invalide",y=async()=>{if(o.value===""||c.value===""){u.notify({color:"red-5",textColor:"white",icon:"warning",message:"Veuillez entrer votre adresse email et votre mot de passe",position:"top",timeout:2500});return}try{i.email=o.value,i.password=c.value,await a.loginUser(i)}catch(E){console.error(E)}};return(E,n)=>(d(),f(A,null,[z(a).inputError?(d(),f("div",{key:0,"v-model":s.value,class:"q-mb-md row justify-center text-negative"}," Email ou mot de passe incorrect ",8,D)):z(a).inputError?C("",!0):(d(),f("div",{key:1,"v-model":s.value,class:"q-mb-md row justify-center text-negative"},"\xA0 ",8,G)),e(B,null,{inputTextOrEmail:t(()=>[e(V,{type:"email",filled:"",modelValue:o.value,"onUpdate:modelValue":n[0]||(n[0]=r=>o.value=r),placeholder:"Email *","lazy-rules":"",rules:[r=>r&&r.length>0||"Veuillez entrer votre email",x],onKeyup:w(y,["enter"])},{prepend:t(()=>[e(_,{name:"mail"})]),_:1},8,["modelValue","rules","onKeyup"])]),inputPassword:t(()=>[e(V,{type:"password",filled:"",modelValue:c.value,"onUpdate:modelValue":n[1]||(n[1]=r=>c.value=r),placeholder:"Mot de passe *","lazy-rules":"",rules:[r=>r&&r.length>0||"Veuillez entrer votre mot de passe",r=>r&&r.length>=8||"Le mot de passe doit avoir 8 caract\xE8res min."],onKeyup:w(y,["enter"])},{prepend:t(()=>[e(_,{name:"lock"})]),_:1},8,["modelValue","rules","onKeyup"])]),formButton:t(()=>[e(S,{title:"Se connecter",onClick:Q(y,["prevent"])},null,8,["onClick"])]),_:1})],64))}}),R=["v-model"],W=["v-model"],X=p({setup(g){const a=b();p({name:"SignUpForm"});const u=U(),s=m(!0),o=m(""),c=m(""),i=m(""),x=m("");let y={username:"",email:"",password:""};const E=r=>/^(?=[a-zA-Z0-9@._%+-]{6,254}$)[a-zA-Z0-9._%+-]{1,64}@(?:[a-zA-Z0-9-]{1,63}\.){1,8}[a-zA-Z]{2,63}$/.test(r)||"Email invalide",n=async()=>{if(o.value===""||c.value===""||i.value===""||x.value===""){u.notify({color:"red-5",textColor:"white",icon:"warning",message:"Veuillez renseigner tous les champs",position:"top",timeout:2500});return}try{if(y.username=o.value,y.email=c.value,i.value===x.value)y.password=i.value;else return;await a.registerUser(y)}catch(r){console.error(r)}};return(r,v)=>(d(),f(A,null,[z(a).invalidEmailError?(d(),f("div",{key:0,"v-model":s.value,class:"q-mb-md row justify-center text-negative"}," Email d\xE9j\xE0 utilis\xE9 ",8,R)):z(a).invalidEmailError?C("",!0):(d(),f("div",{key:1,"v-model":s.value,class:"q-mb-md row justify-center text-negative"}," \xA0 ",8,W)),e(B,null,{inputTextOrEmail:t(()=>[e(V,{type:"text",filled:"",modelValue:o.value,"onUpdate:modelValue":v[0]||(v[0]=l=>o.value=l),placeholder:"Pr\xE9nom *","lazy-rules":"",rules:[l=>l&&l.length>0||"Veuillez entrer votre pr\xE9nom"],onKeyup:w(n,["enter"])},{prepend:t(()=>[e(_,{name:"person"})]),_:1},8,["modelValue","rules","onKeyup"]),e(V,{type:"email",filled:"",modelValue:c.value,"onUpdate:modelValue":v[1]||(v[1]=l=>c.value=l),placeholder:"Email *","lazy-rules":"",rules:[l=>l&&l.length>0||"Veuillez entrer votre email",E],onKeyup:w(n,["enter"])},{prepend:t(()=>[e(_,{name:"mail"})]),_:1},8,["modelValue","rules","onKeyup"])]),inputPassword:t(()=>[e(V,{type:"password",filled:"",modelValue:i.value,"onUpdate:modelValue":v[2]||(v[2]=l=>i.value=l),placeholder:"Mot de passe *","lazy-rules":"",rules:[l=>l&&l.length>0||"Veuillez entrer votre mot de passe",l=>l&&l.length>=8||"Le mot de passe doit avoir 8 caract\xE8res min."],onKeyup:w(n,["enter"])},{prepend:t(()=>[e(_,{name:"lock"})]),_:1},8,["modelValue","rules","onKeyup"]),e(V,{type:"password",filled:"",modelValue:x.value,"onUpdate:modelValue":v[3]||(v[3]=l=>x.value=l),placeholder:"Confirmer votre mot de passe *","lazy-rules":"",rules:[l=>l&&l===i.value||"Veuillez confirmer votre mot de passe"],onKeyup:w(n,["enter"])},{prepend:t(()=>[e(_,{name:"key"})]),_:1},8,["modelValue","rules","onKeyup"])]),formButton:t(()=>[e(S,{title:"S'inscrire",onClick:Q(n,["prevent"])},null,8,["onClick"])]),_:1})],64))}}),q=p({setup(g){p({name:"HomePageForms"});const a=m("login");return(u,s)=>(d(),$(H,{class:"q-mx-md",square:""},{default:t(()=>[e(I,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=o=>a.value=o),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:t(()=>[e(P,{name:"login",label:"Se connecter"}),e(P,{name:"signup",label:"S'inscrire"})]),_:1},8,["modelValue"]),e(j),e(N,{modelValue:a.value,"onUpdate:modelValue":s[1]||(s[1]=o=>a.value=o),animated:""},{default:t(()=>[e(k,{name:"login"},{default:t(()=>[e(J)]),_:1}),e(k,{name:"signup"},{default:t(()=>[e(X)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}}),Y=M("h2",{class:"text-h5 text-center q-mx-lg q-my-lg"},"Pour suivre ses d\xE9penses de mani\xE8re personnalis\xE9e et avec simplicit\xE9 !",-1),le=p({setup(g){return p({name:"IndexPage",components:{HomePageForms:q}}),(a,u)=>(d(),$(L,null,{default:t(()=>[Y,e(q)]),_:1}))}});export{le as default};
